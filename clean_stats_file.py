import getopt, sys, os

def main():
	args = sys.argv[1:]

	if (len(args) == 0):
		print("Needs file argument.")
		return

	with open(os.getcwd() + '/' + args[0]) as f:
		s = f.read()
		s_parts = s.split(' :== ')
		result = ""
		for s in s_parts:
			close_index = s.rfind('}')
			if close_index == -1:
				result += s
				continue
			result += ' :== ' + s[:close_index+1] + '\n' + s[close_index+1:]

		new_file = args[0][:args[0].find('.txt')] + '_clean.txt'
		print (new_file)
		with open(os.getcwd() + '/' + new_file, 'a+') as nf:
			nf.write(result)



if __name__== "__main__":
  main()